<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarah Lawry - Healing Products Shop</title>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Header and Navigation -->
<header>
    <div class="container">
        <div class="logo">
            <h1>Intuitive Healing and Astrology</h1>
            <p>Sarah Lawry</p>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="astrology.html">Astrology</a></li>
                <li><a href="Torus Galaxy.html">Tarot</a></li>
                <li><a href="books.html">Books</a></li>
                <li><a href="consultation.html">Consultation</a></li>
                <li><a href="shop.html">Shop</a></li>
            </ul>
        </nav>
        <div class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </div>
    </div>
</header>

<!-- Shop Hero Section -->
<section class="shop-hero">
    <div class="container">
        <h2>Healing Products & Resources</h2>
        <p>Tools and supplements to support your healing journey</p>
    </div>
</section>

<!-- Shop Container -->
<section class="shop-container section-padding">
    <div class="container">
        <div class="product-grid">
            <!-- Iodine Supplement -->
            <div class="product-card">
                <img src="Images/Product_Iodine.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Iodine Supplement</h3>
                    <p class="price">R299.00</p>
                    <p>High-quality iodine supplement for thyroid health</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (98 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Iodine Supplement" data-price="299">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Methylene Blue -->
            <div class="product-card">
                <img src="Images/Product_MB.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Methylene Blue</h3>
                    <p class="price">R399.00</p>
                    <p>Pharmaceutical grade methylene blue for cognitive support</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (98 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Methylene Blue" data-price="399">Add to Cart</button>
                </div>
            </div>

            <!-- Castor Oil Pack -->
            <div class="product-card">
                <img src="Images/Product_Castor.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Castor Oil Pack</h3>
                    <p class="price">R449.00</p>
                    <p>Organic castor oil pack for liver support and detoxification</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (98 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Castor Oil Pack" data-price="449">Add to Cart</button>
                </div>
            </div>

            <!-- Magnesium Glycinate -->
            <div class="product-card">
                <img src="Images/Product_MagGly.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Magnesium Glycinate</h3>
                    <p class="price">R349.00</p>
                    <p>High absorption magnesium for better sleep and muscle relaxation</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span>4.5/5 (128 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Magnesium Glycinate" data-price="349">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Liposomal Vitamin C -->
            <div class="product-card">
                <img src="Images/Product_VitC.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Liposomal Vitamin C</h3>
                    <p class="price">R429.00</p>
                    <p>Advanced absorption technology for maximum immune support</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.8/5 (92 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Liposomal Vitamin C" data-price="429">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Circadian Light Therapy Lamp -->
            <div class="product-card">
                <img src="Images/Product_RedLight.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Circadian Light Therapy Lamp</h3>
                    <p class="price">R899.00</p>
                    <p>Regulate your sleep-wake cycle and boost energy levels</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                        <span>4.2/5 (67 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Circadian Light Therapy Lamp" data-price="899">Add to
                        Cart
                    </button>
                </div>
            </div>

            <!-- Adrenal Support Complex -->
            <div class="product-card">
                <img src="Images/Product_Adrenal.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Adrenal Support Complex</h3>
                    <p class="price">R379.00</p>
                    <p>Natural formula to combat fatigue and support stress response</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span>4.6/5 (114 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Adrenal Support Complex" data-price="379">Add to
                        Cart
                    </button>
                </div>
            </div>

            <!-- Gut Healing Protocol -->
            <div class="product-card">
                <img src="Images/Product_Gut.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Gut Healing Protocol</h3>
                    <p class="price">R549.00</p>
                    <p>Complete 30-day program for digestive health restoration</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (203 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Gut Healing Protocol" data-price="549">Add to Cart
                    </button>
                </div>
            </div>

            <!-- PEMF Therapy Mat -->
            <div class="product-card">
                <img src="Images/Product_Mat.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>PEMF Therapy Mat</h3>
                    <p class="price">R2,499.00</p>
                    <p>Pulsed electromagnetic field therapy for cellular regeneration</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span>4.7/5 (56 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="PEMF Therapy Mat" data-price="2499">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Mitochondrial Support Blend -->
            <div class="product-card">
                <img src="Images/Product_Mito.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Mitochondrial Support Blend</h3>
                    <p class="price">R419.00</p>
                    <p>Enhance cellular energy production and reduce fatigue</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                        <span>4.0/5 (89 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Mitochondrial Support Blend" data-price="419">Add to
                        Cart
                    </button>
                </div>
            </div>

            <!-- Infrared Sauna Blanket -->
            <div class="product-card">
                <img src="Images/Product_Infra.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Infrared Sauna Blanket</h3>
                    <p class="price">R1,799.00</p>
                    <p>Detoxify and relax with portable infrared therapy</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.8/5 (142 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Infrared Sauna Blanket" data-price="1799">Add to
                        Cart
                    </button>
                </div>
            </div>

            <!-- Nervous System Tonic -->
            <div class="product-card">
                <img src="Images/Product_Nervous.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Nervous System Tonic</h3>
                    <p class="price">R329.00</p>
                    <p>Calming herbal blend for anxiety relief and mental clarity</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span>4.5/5 (176 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Nervous System Tonic" data-price="329">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Lymphatic Drainage Kit -->
            <div class="product-card">
                <img src="Images/Product_Borax.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Lymphatic Drainage Kit</h3>
                    <p class="price">R499.00</p>
                    <p>Complete set for improving circulation and detoxification</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (98 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Lymphatic Drainage Kit" data-price="499">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Red Light Therapy Device -->
            <div class="product-card">
                <img src="Images/Product_RedLight2.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Red Light Therapy Device</h3>
                    <p class="price">R1,899.00</p>
                    <p>Portable red light therapy device for circadian rhythm support</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (98 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Red Light Therapy Device" data-price="1899">Add to
                        Cart
                    </button>
                </div>
            </div>

            <!-- Advanced Face Serum -->
            <div class="product-card">
                <img src="Images/Product_Serum.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Advanced Face Serum</h3>
                    <p class="price">R1,299.00</p>
                    <p>Anti-aging serum to hydrate and rejuvenate your skin.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.8/5 (120 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Advanced Face Serum" data-price="1299">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Organic Body Butter -->
            <div class="product-card">
                <img src="Images/Product_Butter.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Organic Body Butter</h3>
                    <p class="price">R799.00</p>
                    <p>Rich, organic body butter for deep moisturization and soft skin.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.7/5 (95 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Organic Body Butter" data-price="799">Add to Cart</button>
                </div>
            </div>

            <!-- Ultimate Hydrating Serum -->
            <div class="product-card">
                <img src="Images/Product_Serum.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Ultimate Hydrating Serum</h3>
                    <p class="price">R999.00</p>
                    <p>Hydrating serum for smooth, refreshed, and glowing skin.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.6/5 (85 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Ultimate Hydrating Serum" data-price="999">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Organic Sun Block -->
            <div class="product-card">
                <img src="Images/Product_SunBlock.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Organic Sun Block</h3>
                    <p class="price">R499.00</p>
                    <p>Natural sunblock to protect your skin from harmful UV rays.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.8/5 (150 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Organic Sun Block" data-price="499">Add to Cart</button>
                </div>
            </div>

            <!-- Whitening Tooth Powder -->
            <div class="product-card">
                <img src="Images/Product_Tooth.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Whitening Tooth Powder</h3>
                    <p class="price">R199.00</p>
                    <p>Whitening tooth powder for a bright and fresh smile.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.9/5 (100 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Whitening Tooth Powder" data-price="199">Add to Cart
                    </button>
                </div>
            </div>

            <!-- Organic Deodorant -->
            <div class="product-card">
                <img src="Images/Product_Deo.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Organic Deodorant</h3>
                    <p class="price">R179.00</p>
                    <p>Natural deodorant with a fresh, lasting fragrance.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.6/5 (80 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Organic Deodorant" data-price="179">Add to Cart</button>
                </div>
            </div>

            <!-- Organic Soap Bar -->
            <div class="product-card">
                <img src="Images/Product_Soap.png" alt="Iodine Supplement">
                <div class="product-card-content">
                    <h3>Organic Soap Bar</h3>
                    <p class="price">R89.00</p>
                    <p>Gentle, organic soap bar for healthy and smooth skin.</p>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span>4.7/5 (75 reviews)</span>
                    </div>
                    <button class="add-to-cart" data-product="Organic Soap Bar" data-price="89">Add to Cart</button>
                </div>
            </div>

            <!-- Cart Section -->
            <div class="cart-container">
                <h3>Your Order</h3>
                <div class="cart-items">
                    <!-- Items will be added here by JavaScript -->
                </div>
                <div class="cart-total">
                    <p>Total: <span id="cart-total">R0.00</span></p>
                </div>

                <!-- Payment Method Selection -->
                <div class="payment-method">
                    <h4>Payment Method</h4>
                    <div class="payment-options">
                        <label>
                            <input type="radio" name="payment-method" value="stripe" checked>
                            <span>Credit/Debit Card</span>
                        </label>
                        <label>
                            <input type="radio" name="payment-method" value="eft">
                            <span>Bank Transfer (EFT)</span>
                        </label>
                    </div>
                </div>

                <!-- Checkout Form -->
                <form id="checkout-form" class="checkout-form">
                    <h4>Shipping Details</h4>
                    <div class="form-group">
                        <input type="text" name="name" placeholder="Full Name" required>
                    </div>
                    <div class="form-group">
                        <input type="email" name="email" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="tel" name="phone" placeholder="Phone Number" required>
                    </div>
                    <div class="form-group">
                        <textarea name="address" placeholder="Shipping Address" required></textarea>
                    </div>
                    <div class="form-group">
                        <textarea name="customization" placeholder="Special Instructions (if any)"></textarea>
                    </div>

                    <!-- Stripe Payment Element (hidden for EFT) -->
                    <div id="stripe-payment-element" class="stripe-element">
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 5px; text-align: center;">
                            <p>Stripe payment integration would be implemented here in a production environment.</p>
                            <p>For demonstration, we'll simulate a successful payment.</p>
                        </div>
                    </div>

                    <!-- EFT Instructions (hidden by default) -->
                    <div id="eft-instructions" class="eft-instructions" style="display: none;">
                        <h5>EFT Payment Instructions</h5>
                        <p>Please make payment to:</p>
                        <p><strong>Bank:</strong> Standard Bank</p>
                        <p><strong>Account Name:</strong> Sarah Lawry Healing</p>
                        <p><strong>Account Number:</strong> 0123456789</p>
                        <p><strong>Branch Code:</strong> 123456</p>
                        <p><strong>Reference:</strong> Your Name + Order #</p>
                        <p>Email proof of payment to <strong>orders@sarahlawryhealing.com</strong></p>
                    </div>

                    <button type="submit" id="submit-order" class="checkout-btn">
                        <span id="button-text">Pay with Card</span>
                        <span id="button-spinner" class="spinner" style="display: none;"></span>
                    </button>
                </form>

                <!-- Debug Panel -->
                <div class="debug-panel">
                    <div class="debug-title">Connection Debug Information:</div>
                    <div id="debug-info">No errors detected yet.</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Notification Element -->
<div id="notification" class="notification"></div>

<!-- Order Success Modal -->
<div class="modal-overlay" id="success-modal">
    <div class="order-success-modal">
        <i class="fas fa-check-circle"></i>
        <h3>Order Confirmed!</h3>
        <p>Thank you for your order. A confirmation email has been sent to your email address.</p>

        <div class="order-details">
            <p><strong>Order Reference:</strong> <span id="order-ref"></span></p>
            <p><strong>Customer Name:</strong> <span id="customer-name"></span></p>
            <p><strong>Order Total:</strong> <span id="order-total"></span></p>
        </div>

        <p>We will process your order within 24-48 hours. You will receive a notification once your items have been
            shipped.</p>
        <button class="modal-close-btn" id="modal-close">Continue Shopping</button>
    </div>
</div>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Intuitive Healing and Astrology</h3>
                <p>Sarah Lawry</p>
                <p>Johannesburg, South Africa</p>
            </div>

            <div class="footer-section">
                <h3>Contact</h3>
                <p>WhatsApp: +27 72 808 7795</p>
                <p>Email: info@sarahlawryhealing.com</p>
            </div>

            <div class="footer-section">
                <h3>Follow</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 Intuitive Healing and Astrology. All rights reserved.</p>
            <p>Disclaimer: I am not a doctor but a healer or health coach. I don't prescribe medicines but suggest
                lifestyle changes and orthomolecular protocols.</p>
        </div>
    </div>
</footer>

<script>
  // Debug logging function
  function debugLog(message, isError = false) {
    const debugInfo = document.getElementById('debug-info');
    const logEntry = document.createElement('div');
    logEntry.className = isError ? 'debug-log' : 'debug-success';
    logEntry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
    debugInfo.appendChild(logEntry);
    debugInfo.scrollTop = debugInfo.scrollHeight;
    console.log(message);
  }

  // Optional: Add pulse effect on page load
  document.addEventListener('DOMContentLoaded', function () {
    // Mobile menu functionality
    const mobileMenuBtn = document.querySelector(".mobile-menu-btn");
    const navMenu = document.querySelector("nav ul");

    if (mobileMenuBtn && navMenu) {
      mobileMenuBtn.addEventListener("click", function() {
        navMenu.classList.toggle("active");
      });

      // Close menu when links are clicked
      navMenu.querySelectorAll("a").forEach(anchor => {
        anchor.addEventListener("click", function() {
          navMenu.classList.remove("active");
        });
      });
    }

    // Close menu on window resize (desktop)
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768 && navMenu) {
        navMenu.classList.remove('active');
      }
    });

    // Test the PHP connection on page load
    testPHPConnection();
  });

  // Test PHP connection
  async function testPHPConnection() {
    try {
      debugLog("Testing connection to PHP script...");

      // Test with a simple request
      const response = await fetch('email-handler.php', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({test: "connection_test"})
      });

      if (response.ok) {
        const data = await response.text();
        debugLog("PHP script is accessible");
        debugLog(`Response: ${data.substring(0, 100)}...`);
      } else {
        debugLog(`Server returned status: ${response.status}`, true);
      }
    } catch (error) {
      debugLog(`Connection failed: ${error.message}`, true);
      debugLog("Please check: 1) PHP file path 2) File permissions 3) CORS settings", true);
    }
  }

  // Shopping Cart Functionality
  document.addEventListener('DOMContentLoaded', function () {
    let cart = [];

    // Notification function
    function showNotification(message, isError = false) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = isError ? 'notification error show' : 'notification show';

      setTimeout(() => {
        notification.className = 'notification';
      }, 3000);
    }

    // Add to cart functionality
    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', function () {
        const product = this.dataset.product;
        const price = parseFloat(this.dataset.price);

        // Check if product already in cart
        const existingItem = cart.find(item => item.product === product);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            product: product,
            price: price,
            quantity: 1
          });
        }

        updateCart();
        showNotification(`${product} added to cart!`);
      });
    });

    // Update cart display
    function updateCart() {
      const cartItems = document.querySelector('.cart-items');
      const cartTotal = document.getElementById('cart-total');

      // Clear current cart items
      cartItems.innerHTML = '';

      // Add items to cart
      let total = 0;

      if (cart.length === 0) {
        cartItems.innerHTML = '<p class="empty-cart">Your cart is empty</p>';
        cartTotal.textContent = 'R0.00';
        return;
      }

      cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
                <div>
                    <strong>${item.product}</strong>
                    <p>R${item.price.toFixed(2)} x ${item.quantity}</p>
                </div>
                <div>
                    <p>R${itemTotal.toFixed(2)}</p>
                    <button class="remove-item" data-index="${index}">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

        cartItems.appendChild(cartItem);
      });

      // Update total
      cartTotal.textContent = `R${total.toFixed(2)}`;

      // Add event listeners to remove buttons
      document.querySelectorAll('.remove-item').forEach(button => {
        button.addEventListener('click', function () {
          const index = parseInt(this.dataset.index);
          const removedItem = cart[index].product;
          cart.splice(index, 1);
          updateCart();
          showNotification(`${removedItem} removed from cart`);
        });
      });
    }

    // Payment method toggle
    document.querySelectorAll('input[name="payment-method"]').forEach(radio => {
      radio.addEventListener('change', function () {
        if (this.value === 'stripe') {
          document.getElementById('stripe-payment-element').style.display = 'block';
          document.getElementById('eft-instructions').style.display = 'none';
          document.getElementById('button-text').textContent = 'Pay with Card';
        } else {
          document.getElementById('stripe-payment-element').style.display = 'none';
          document.getElementById('eft-instructions').style.display = 'block';
          document.getElementById('button-text').textContent = 'Place Order';
        }
      });
    });

    // Form submission
    document.getElementById('checkout-form').addEventListener('submit', async function (e) {
      e.preventDefault();

      if (cart.length === 0) {
        showNotification('Your cart is empty!', true);
        return;
      }

      const formData = new FormData(this);
      const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;

      // Show loading state
      document.getElementById('button-text').style.display = 'none';
      document.getElementById('button-spinner').style.display = 'inline-block';
      document.getElementById('submit-order').disabled = true;

      try {
        if (paymentMethod === 'stripe') {
          // Simulate Stripe payment processing
          await new Promise(resolve => setTimeout(resolve, 2000));

          // In a real implementation, you would use Stripe's API here
          // For demo purposes, we'll assume the payment was successful
        }

        // Process order
        const orderData = {
          to: formData.get('email'),
          customer_name: formData.get('name'),
          customer_email: formData.get('email'),
          customer_phone: formData.get('phone'),
          customer_address: formData.get('address'),
          customization: formData.get('customization'),
          order_ref: 'SL' + Date.now(),
          order_date: new Date().toLocaleDateString('en-ZA'),
          order_items: generateOrderItemsHTML(),
          order_total: calculateOrderTotal(),
          payment_method: paymentMethod === 'stripe' ? 'Credit Card' : 'Bank Transfer (EFT)',
          admin_email: 'a.lawry98@gmail.com' // Send admin email to this address
        };

        debugLog("Sending order data to server...");

        // Send order data to server
        const response = await sendOrderToServer(orderData);

        if (response.success) {
          debugLog("Order successfully processed!");
          // Show success modal with order details
          document.getElementById('order-ref').textContent = orderData.order_ref;
          document.getElementById('customer-name').textContent = orderData.customer_name;
          document.getElementById('order-total').textContent = 'R' + orderData.order_total;
          document.getElementById('success-modal').classList.add('active');

          // Reset cart and form
          cart = [];
          updateCart();
          this.reset();
        } else {
          throw new Error(response.error || 'Failed to process order');
        }

      } catch (error) {
        console.error('Order processing error:', error);
        debugLog(`Error: ${error.message}`, true);
        showNotification('Error: ' + error.message, true);
      } finally {
        // Reset button state
        document.getElementById('button-text').style.display = 'inline';
        document.getElementById('button-spinner').style.display = 'none';
        document.getElementById('submit-order').disabled = false;
      }
    });

    // Close modal functionality
    document.getElementById('modal-close').addEventListener('click', function () {
      document.getElementById('success-modal').classList.remove('active');
    });

    // Helper functions
    function generateOrderItemsHTML() {
      let itemsHTML = '';
      cart.forEach(item => {
        itemsHTML += `<div class="item">${item.product} - R${item.price} x ${item.quantity} = R${(item.price * item.quantity).toFixed(2)}</div>`;
      });
      return itemsHTML;
    }

    function calculateOrderTotal() {
      return cart.reduce((total, item) => total + (item.price * item.quantity), 0).toFixed(2);
    }

    // Real implementation for sending order data to server
    async function sendOrderToServer(orderData) {
      try {
        debugLog("Sending order to: email-handler.php");

        const response = await fetch('email-handler.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(orderData)
        });

        const data = await response.json();

        if (!response.ok) {
          debugLog(`Server error: ${data.error}`, true);
          throw new Error(data.error || 'Server error');
        }

        debugLog("Order successfully sent to server!");
        return data;
      } catch (error) {
        debugLog(`Network error: ${error.message}`, true);

        // Provide specific troubleshooting advice based on error type
        if (error.message.includes('Failed to fetch')) {
          debugLog("This usually means: 1) Wrong file path 2) PHP errors 3) CORS issues", true);
          debugLog("Please check that email-handler.php is in the same directory as this HTML file", true);
        }

        throw new Error('Failed to connect to server. Please try again.');
      }
    }

    // Initialize cart
    updateCart();
  });
</script>
</body>
</html>